<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>TIdFingerServer Class</title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', 'TIdFingerServer.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
Topic Path: Symbol Reference &gt; Classes &gt; <a href="TIdFingerServer.html" target="topic">TIdFingerServer Class</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="50%">
<div class="Element2">
<a href="contents.html" target="tocidx"><img src="btn_globals_contents_midblue.gif" border="0" alt="Contents" title="Contents" onmouseover="switchImage(this, 'btn_globals_contents_midblue_hover.gif');" onmouseout="switchImage(this, 'btn_globals_contents_midblue.gif');"></a><a href="idx.html" target="tocidx"><img src="btn_globals_index_midblue.gif" border="0" alt="Index" title="Index" onmouseover="switchImage(this, 'btn_globals_index_midblue_hover.gif');" onmouseout="switchImage(this, 'btn_globals_index_midblue.gif');"></a><a href="index.html" target="topic"><img src="btn_globals_home_midblue.gif" border="0" alt="Home" title="Home" onmouseover="switchImage(this, 'btn_globals_home_midblue_hover.gif');" onmouseout="switchImage(this, 'btn_globals_home_midblue.gif');"></a></div>
</td><td width="50%">
<div class="Element90">
<a href="TIdFinger_VerboseOutput.html" target="topic"><img src="btn_prev_midblue.gif" border="0" alt="Previous" title="Previous" onmouseover="switchImage(this, 'btn_prev_midblue_hover.gif');" onmouseout="switchImage(this, 'btn_prev_midblue.gif');"></a><img src="btn_up_d.gif" border="0" alt="Up" title="Up"><a href="!!MEMBEROVERVIEW_TIdFingerServer.html" target="topic"><img src="btn_next_midblue.gif" border="0" alt="Next" title="Next" onmouseover="switchImage(this, 'btn_next_midblue_hover.gif');" onmouseout="switchImage(this, 'btn_next_midblue.gif');"></a></div>
</td></tr></table><div class="Element5">
TIdFingerServer Class</div>
<div class="Element7">
<a href="!!MEMBERTYPE_Properties_TIdFingerServer.html" target="topic">TIdFingerServer Properties</a> &nbsp; <a href="!!MEMBERTYPE_Events_TIdFingerServer.html" target="topic">TIdFingerServer Events</a> &nbsp; <a href="!!MEMBEROVERVIEW_TIdFingerServer.html" target="topic">TIdFingerServer Members</a></div>
<div class="Element731">
<div class="Element730">
<a href="#" onclick="ToggleAllElements('Hierarchy,Pascal,Description,See_Also,Related_Information', 'linkToggleAllElements', 'imgToggleAllElements', 'Collapse All', 'Expand All');"><img src="btn_collapse.gif" border="0" alt="" title="" id="imgToggleAllElements"></a><a href="#" id="linkToggleAllElements" onclick="ToggleAllElements('Hierarchy,Pascal,Description,See_Also,Related_Information', 'linkToggleAllElements', 'imgToggleAllElements', 'Collapse All', 'Expand All');">Collapse All</a></div>
</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="Summary"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Implements a Finger protocol server.</p></div>
</div>
<a name="File"></a><div class="Element14">
File</div>
<div class="Element10033">
<div class="Section33">
<p class="Section33">
<a href="IdFingerServer_pas.html" target="topic">IdFingerServer</a></p></div>
</div>
<a name="Hierarchy"></a><div class="Section1000032">
<a onclick="toggleVisibilityStored('Hierarchy');" class="a_Section1000032"><img src="btn_collapse_large.gif" border="0" alt="" title="" id="imgHierarchy">Hierarchy</a></div>
<div id="divHierarchy">
<div class="Element151"><div class="Element150"><pre class="Element150"><img src="TIdFingerServer.png" border="0" alt="" title="" usemap="#TIdFingerServer"><map class="Element150" name="TIdFingerServer"><area class="Element150" shape="rect" coords="139,0,257,15" href="TIdInitializerComponent.html"><area class="Element150" shape="rect" coords="287,0,388,15" href="TIdBaseComponent.html"><area class="Element150" shape="rect" coords="418,0,499,15" href="TIdComponent.html"><area class="Element150" shape="rect" coords="529,0,641,15" href="TIdCustomTCPServer.html"><area class="Element150" shape="rect" coords="671,0,758,15" href="TIdFingerServer.html"></map></pre></div></div>
</div>
<a name="Pascal"></a><div class="Element99">
<a onclick="toggleVisibilityStored('Pascal');"><img src="btn_collapse_large.gif" border="0" alt="" title="" id="imgPascal">Pascal</a></div>
<div id="divPascal">
<div class="Element101"><div class="Element100"><pre class="Element100">TIdFingerServer = <strong>class</strong>(TIdCustomTCPServer);</pre></div></div>
</div>
<a name="Description"></a><div class="Element14">
<a onclick="toggleVisibilityStored('Description');" class="a_Element14"><img src="btn_collapse_large.gif" border="0" alt="" title="" id="imgDescription">Description</a></div>
<div id="divDescription">
<div class="Element11">
<div class="Element10">
<p class="Element10">
TIdFingerServer is a <a href="TIdTCPServer.html" target="topic">TIdTCPServer</a> descendant that implements a server supporting the Finger User Information Protocol, as described in the Internet Standards document:&nbsp;</p>
<p class="Element10">
<a href="http://www.rfc-editor.org/rfc/rfc1288.txt"> RFC 1288 - The Finger User Information Protocol </a>&nbsp;</p>
<p class="Element10">
<strong>Overview of the Finger Protocol</strong>&nbsp;</p>
<p class="Element10">
The Finger protocol is an interface for a database of information about users on a remote system. The Finger protocol can include information such as if a user is logged in to the system, when the user last read their E-Mail, or optional information the user wishes to make available publicly (.plan file).&nbsp;</p>
<p class="Element10">
Finger is based on the Transmission Control Protocol, using TCP port 79 decimal (117 octal). The local host opens a TCP connection to a remote host on the Finger port. The local host sends a one line query based upon the Finger query specification, and waits for the responce.&nbsp;</p>
<p class="Element10">
The Finger server receives and processes the query, returns an answer, then initiates the close of the connection.&nbsp;</p>
<p class="Element10">
The local host receives the answer and the close signal, then proceeds closing its end of the connection.&nbsp;</p>
<p class="Element10">
<strong>Data format</strong>&nbsp;</p>
<p class="Element10">
Any data transferred MUST be in ASCII format, with no parity, and with lines ending in CRLF (ASCII 13 followed by ASCII 10). This excludes other character formats such as EBCDIC, etc. This also means that any characters between ASCII 128 and ASCII 255 should truly be international data, not 7-bit ASCII with the parity bit set.&nbsp;</p>
<p class="Element10">
<strong>Finger Query Specifications</strong>&nbsp;</p>
<p class="Element10">
The Finger query specification is defined using the following tokens and productions:&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element103"><div class="Element102"><pre class="Element102">
   {Q1}    ::=  [{W}|{W}{S}{U}]{C}

   {Q2}    ::=  [{W}{S}][{U}]{H}{C}

   {U}     ::=  username

   {H}     ::=  @hostname | @hostname{H}

   {W}     ::=  /W

   {S}     ::=  &lt;SP&gt; | &lt;SP&gt;{S}

   {C}     ::=  &lt;CRLF&gt;
</pre></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
{H} is recursive, and means that there is no arbitrary limit on the number of @hostname tokens in the query. In examples of the {Q2} request specification, the number of @hostname tokens is limited to two, simply for brevity.&nbsp;</p>
<p class="Element10">
Be aware that {Q1} and {Q2} do not refer to a user typing &quot;finger user@host&quot; from an operating system prompt. It refers to the data actually received by the handler for the finger request on the remote server. So, if a user types &quot;finger user@host&lt;CRLF&gt;&quot;, the RUIP on the remote host receives &quot;user&lt;CRLF&gt;&quot;, which corresponds to {Q1}.&nbsp;</p>
<p class="Element10">
As with anything in the IP protocol suite, &quot;be liberal in what you accept&quot;.&nbsp;</p>
<p class="Element10">
<strong>Expected Finger Responses</strong>&nbsp;</p>
<p class="Element10">
For the most part, the output of a Finger query doesn't follow a strict specification, since it is designed to be read by people instead of programs. It should mainly strive to be informative.&nbsp;</p>
<p class="Element10">
Output of ANY query is subject to the security restrictions that apply the connection to the Finger server.&nbsp;</p>
<p class="Element10">
<strong>{C} Query</strong>&nbsp;</p>
<p class="Element10">
A query of {C} is a request for a list of all online users. The remote server must either answer or actively refuse the query. If it answers, then it MUST provide at least the user's full name. The system administrator SHOULD be allowed to include other useful information, such as:&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">terminal location</li>
<li class="Element601">office location</li>
<li class="Element601">office phone number</li>
<li class="Element601">job name</li>
<li class="Element601">idle time (number of minutes since last typed input, or since last job activity).</li>
</ul>&nbsp;</p>
<p class="Element10">
<strong>{U}{C} Query</strong>&nbsp;</p>
<p class="Element10">
A query of {U}{C} is a request for in-depth status of a specified user {U}. If you really want to refuse this service, you probably don't want to be running Finger in the first place.&nbsp;</p>
<p class="Element10">
An answer MUST include at least the full name of the user. If the user is logged in, at least the same amount of information returned by {C} for that user MUST also be returned by {U}{C}.&nbsp;</p>
<p class="Element10">
Since this is a query for information on a specific user, the system administrator SHOULD be allowed to choose to return additional useful information, such as:&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">office location</li>
<li class="Element601">office phone number</li>
<li class="Element601">home phone number</li>
<li class="Element601">status of login (not logged in, logout time, etc)</li>
<li class="Element601">user information file</li>
</ul>&nbsp;</p>
<p class="Element10">
A user information file is a feature wherein a user may leave a short message that will be included in the response to Finger requests. (This is sometimes called a &quot;plan&quot; file.) This is easily implemented by (for example) having the program look for a specially named text file in the user's home directory or some common area; the exact method is left to the implementor. The system administrator SHOULD be allowed to specifically turn this feature on and off.&nbsp;</p>
<p class="Element10">
There MAY be a way for the user to run a program in response to a Finger query. If this feature exists, the system administrator SHOULD be allowed to specifically turn it on and off.&nbsp;</p>
<p class="Element10">
<strong>{U} Ambiguity</strong>&nbsp;</p>
<p class="Element10">
Allowable &quot;names&quot; in the command line MUST include &quot;user names&quot; or &quot;login names&quot; as defined by the system. If a name is ambiguous, the system administrator SHOULD be allowed to choose whether or not all possible derivations should be returned in some fashion.&nbsp;</p>
<p class="Element10">
<strong>/W query token</strong>&nbsp;</p>
<p class="Element10">
The token /W in the {Q1} or {Q2} query types SHOULD at best be interpreted at the last RUIP to signify a higher level of verbosity in the user information output, or at worst be ignored.&nbsp;</p>
<p class="Element10">
<strong>Vending machines</strong>&nbsp;</p>
<p class="Element10">
Vending machines SHOULD respond to a {C} request with a list of all items currently available for purchase and possible consumption. Vending machines SHOULD respond to a {U}{C} request with a detailed count or list of the particular product or product slot. Vending machines should NEVER NEVER EVER eat money.&nbsp;</p>
<p class="Element10">
<strong>Implementation Security</strong>&nbsp;</p>
<p class="Element10">
Sound implementation of Finger is of the utmost importance. Implementations should be tested against various forms of attack. In particular, an server SHOULD protect itself against malformed inputs. Vendors providing Finger with the operating system or network software should subject their implementations to penetration testing.&nbsp;</p>
<p class="Element10">
Finger is one of the avenues for direct penetration, as the Morris worm pointed out quite vividly. Like Telnet, FTP and SMTP, Finger is one of the protocols at the security perimeter of a host. Accordingly, the soundness of the implementation is paramount. The implementation should receive just as much security scrutiny during design, implementation, and testing as Telnet, FTP, or SMTP.&nbsp;</p>
<p class="Element10">
<strong>RUIP security</strong>&nbsp;</p>
<p class="Element10">
Warning!! Finger discloses information about users; moreover, such information may be considered sensitive. Security administrators should make explicit decisions about whether to run Finger and what information should be provided in responses. One existing implementation provides the time the user last logged in, the time he last read mail, whether unread mail was waiting for him, and who the most recent unread mail was from! This makes it possible to track conversations in progress and see where someone's attention was focused. Sites that are information-security conscious should not run Finger without an explicit understanding of how much information it is giving away.&nbsp;</p>
<p class="Element10">
<strong>Atomic Discharge</strong>&nbsp;</p>
<p class="Element10">
All implementations of Finger SHOULD allow individual system administrators to tailor what atoms of information are returned to a query. For example:&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">Administrator A should be allowed to specifically choose to return office location, office phone number, home phone number, and logged in/logout time.</li>
</ul>&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">Administrator B should be allowed to specifically choose to return only office location, and office phone number.</li>
</ul>&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">Administrator C should be allowed to specifically choose to return the minimum amount of required information, which is the person's full name.</li>
</ul>&nbsp;</p>
<p class="Element10">
<strong>User Information Files</strong>&nbsp;</p>
<p class="Element10">
Allowing an RUIP to return information out of a user-modifiable file should be seen as equivalent to allowing any information about your system to be freely distributed. That is, it is potentially the same as turning on all specifiable options. This information security breach can be done in a number of ways, some cleverly, others straightforwardly. This should disturb the sleep of system administrators who wish to control the returned information.&nbsp;</p>
<p class="Element10">
<strong>Execution of User Programs</strong>&nbsp;</p>
<p class="Element10">
Allowing an RUIP to run a user program in response to a Finger query is potentially dangerous. BE CAREFUL!! -- the RUIP MUST NOT allow system security to be compromised by that program. Implementing this feature may be more trouble than it is worth, since there are always bugs in operating systems, which could be exploited via this type of mechanism.&nbsp;</p>
<p class="Element10">
<strong>{U} ambiguity</strong>&nbsp;</p>
<p class="Element10">
Be aware that a malicious user's clever and/or persistent use of this feature can result in a list of most of the usernames on a system. Refusal of {U} ambiguity should be considered in the same vein as refusal of {C} requests.&nbsp;</p>
<p class="Element10">
<strong>Audit trails</strong>&nbsp;</p>
<p class="Element10">
Implementations SHOULD allow system administrators to log Finger queries.&nbsp;</p>
<p class="Element10">
<strong>Client security</strong>&nbsp;</p>
<p class="Element10">
It is expected that there will normally be some client program that the user runs to query the initial RUIP. By default, this program SHOULD filter any unprintable data, leaving only printable 7-bit characters (ASCII 32 through ASCII 126), tabs (ASCII 9), and CRLFs.&nbsp;</p>
<p class="Element10">
This is to protect against people playing with terminal escape codes, changing other peoples' X window names, or committing other dastardly or confusing deeds. Two separate user options SHOULD be considered to modify this behavior, so that users may choose to view international or control characters:&nbsp;</p>
<p class="Element10">

<ul class="Element631">
<li class="Element601">one to allow all characters less than ASCII 32</li>
<li class="Element601">another to allow all characters greater than ASCII 126</li>
</ul>&nbsp;</p>
<p class="Element10">
For environments that live and breathe international data, the system administrator SHOULD be given a mechanism to enable the latter option by default for all users on a particular system. This can be done via a global environment variable or similar mechanism.</p></div>
</div>
</div>
<a name="See_Also"></a><div class="Section1000009">
<a onclick="toggleVisibilityStored('See_Also');" class="a_Section1000009"><img src="btn_collapse_large.gif" border="0" alt="" title="" id="imgSee_Also">See Also</a></div>
<div id="divSee_Also">
<div class="Element10009">
<div class="Section9">
<p class="Section9">
<a href="TIdTCPServer.html" target="topic">TIdTCPServer</a>&nbsp;</p>
<p class="Section9">
 <a href="IndySupport.html" target="topic">IndySupport</a></p></div>
</div>
</div>
<a name="Related_Information"></a><div class="Section1000034">
<a onclick="toggleVisibilityStored('Related_Information');" class="a_Section1000034"><img src="btn_collapse_large.gif" border="0" alt="" title="" id="imgRelated_Information">Related Information</a></div>
<div id="divRelated_Information">
<div class="Element10034">
<div class="Section34">
<a href="!!MEMBERTYPE_Properties_TIdFingerServer.html" target="topic">TIdFingerServer Properties</a><br /><a href="!!MEMBERTYPE_Events_TIdFingerServer.html" target="topic">TIdFingerServer Events</a><br /><a href="!!MEMBEROVERVIEW_TIdFingerServer.html" target="topic">TIdFingerServer Members</a></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
Copyright © 1993-2006, Chad Z. Hower (aka Kudzu) and the Indy Pit Crew. All rights reserved.</div>
</td></tr><tr><td width="100%">
<div class="Element97">
Post feedback to the <a href="news://news.atozed.com/atozedsoftware.indy.documentation">Indy Docs Newsgroup</a>.</div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>